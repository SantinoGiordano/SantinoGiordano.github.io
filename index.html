<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Game</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
</head>

<header>

</header>

<canvas id="myCanvas">

</canvas>


<h4>
    <p id="gameText">

    </p>
    <br><br>
</h4>

<h4>
    Inventory
</h4>
<img id="keyArtroom" width="50" height="90">
<img id="keyStorage" width="50" height="90">
<img id="screwdriver" width="50" height="90">

<p id="displayArea">
    <button onclick="back()">
        Back
    </button>
</p>

<div id="audioFile">
    <source src="doorOpen.mp3" type="audio/mpeg">
</div>


</canvas>

</html>

<script>

    var sound = document.getElementById("audioFile");
    let room = 0
    let count = 0
    let middleDoor = false
    let chest = false
    let keys = false
    let screwdriver = false
    let x
    let y
    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");
    ctx.font = "16px Arial";

    canvas.addEventListener("mousemove", function (e) {
        var cRect = canvas.getBoundingClientRect();        // Gets CSS pos, and width/height
        x = Math.round(e.clientX - cRect.left);  // Subtract the 'left' of the canvas 
        y = Math.round(e.clientY - cRect.top);   // from the X/Y positions to make  
        ctx.clearRect(0, 0, canvas.width, canvas.height);  // (0,0) the top left of the canvas
        //ctx.fillText("X: " + x + ", Y: " + y, 10, 20);
        console.log(y, x,)

    });

    document.getElementById("myCanvas").onclick = function clicked() {
        artroom();
        middleRoom();
        storageRoom();
        endHallway();
        gameOver();
    }

    function gameOver(){
        if (room == 1 &&
            screwdriver == false &&
            x > 262 &&
            x < 404 &&
            y > 372 &&
            y < 422) {
            document.getElementById("gameText").innerHTML = "Just a bolted down sewer main...might lead outside ";
        }

        if (room == 1 &&
            screwdriver == true &&
            x > 262 &&
            x < 404 &&
            y > 372 &&
            y < 422) {
            document.getElementById("myCanvas").style.backgroundImage = "url(endGame.png)";
            document.getElementById("gameText").innerHTML = "You use the screw to remove the bolts, and you life the cover to reveal a way out! ";
        }
    }

    function artroom() {

        if (count == 0 &&
            x > 134 &&
            x < 250 &&
            y > 40 &&
            y < 483) {
            document.getElementById("myCanvas").style.backgroundImage = "url(artroom.png)";
            count++;
            room = 1;
            playAudio();
        }
        if (room == 1 &&
            count == 1 &&
            x > 632 &&
            x < 893 &&
            y > 287 &&
            y < 346) {
            document.getElementById("gameText").innerHTML = "Just a bunch of papers on a desk...if you get bored, you can draw";

        }
        if (room == 1 &&
            count == 1 &&
            x > 60 &&
            x < 85 &&
            y > 220 &&
            y < 248) {
            document.getElementById("gameText").innerHTML = "You found an old key...might have a use ";
            document.getElementById("keyArtroom").src = "keychain.png";
            keys = true;

        }

        function playAudio(){
            sound.play();
        }

        /*
        if (
            x > 60 &&
            x < 85 &&
            y > 220 &&
            y < 248 &&
            keys == true) {
            document.getElementById("gameText").innerHTML = "You already have one of these, its always nice to know where more are though..."
        } */
    }

    function middleRoom() {
        if (middleDoor == true &&
            count == 0 &&
            x > 405 &&
            x < 595 &&
            y > 40 &&
            y < 335) {
            document.getElementById("myCanvas").style.backgroundImage = "url(hallwayEnd.png)";
            document.getElementById("gameText").innerHTML = "The Key from the Chest opened the door.";
            count++
            room = 2
        }
        if (middleDoor == false &&
            count == 0 &&
            x > 405 &&
            x < 595 &&
            y > 40 &&
            y < 335) {
            document.getElementById("gameText").innerHTML = "Hummm...Seems like its locked? Might need a key";

        }
        if (keys == true &&
            middleDoor == false &&
            count == 0 &&
            x > 405 &&
            x < 595 &&
            y > 40 &&
            y < 335) {
            document.getElementById("gameText").innerHTML = "Thats a key...not the right one for this door though";



        }

    }

    function storageRoom() {
        if (count == 0 &&
            x > 756 &&
            x < 859 &&
            y > 23 &&
            y < 527) {
            document.getElementById("myCanvas").style.backgroundImage = "url(storageroom.jpg)";
            count++
            room = 3
        }
        if (room == 3 &&
            count == 1 &&
            keys == false &&
            x > 194 &&
            x < 337 &&
            y > 313 &&
            y < 446) {
            document.getElementById("gameText").innerHTML = "Something important might be in there...looks like its locked";

        }

        if (room == 3 &&
            count == 1 &&
            keys == true &&
            x > 194 &&
            x < 337 &&
            y > 313 &&
            y < 446) {
            document.getElementById("gameText").innerHTML = "Those keys were able to unlock the Chest...You were able to find another key";
            document.getElementById("keyStorage").src = "chestKey.png"
            chest = true
            middleDoor = true

        }

        if (room == 3 &&
            count == 1 &&
            x > 530 &&
            x < 788 &&
            y > 449 &&
            y < 609) {
            document.getElementById("gameText").innerHTML = "You look inside the boxes, nothing of intrest was in there ";
        }

        if (room == 3 &&
            count == 1 &&
            x > 684 &&
            x < 753 &&
            y > 78 &&
            y < 406) {
            document.getElementById("gameText").innerHTML = "its just a creepy mirror...nothing to see here";
        }
    }

    function endHallway() {
        if (count == 1 &&
            x > 296 &&
            x < 469 &&
            y > 205 &&
            y < 247
        ) {
            document.getElementById("gameText").innerHTML = " You open the droor of the mirror stand, in it laid... a screwdriver?"
            document.getElementById("screwdriver").src = "screwdriver.png"
            screwdriver = true
        }
        if (count == 1 &&
            room == 2 &&
            x > 713 &&
            x < 835 &&
            y > 91 &&
            y < 160) {
            document.getElementById("gameText").innerHTML = "Just some books for light reeding"
        }
        /*
                if(screwdriver == true && 
                   x > 296 &&
                   x < 469 &&
                   y > 205 &&
                   y < 247 ){
                document.getElementById("gameText").innerHTML = "You open the droor again... to your dismay theres nothing else in there"
            } 
        */
    }

    function back() {
        document.getElementById("myCanvas").style.backgroundImage = "url(mainHall.jpg)";
        count = 0
        room = 0

    }

</script>

<style>
    #myCanvas {
        height: 670px;
        width: 1000px;
        border: 5px solid rgb(0, 0, 0);
        background-image: url(mainHall.jpg);
        background-repeat: no-repeat;
        background-size: cover;
        text-align: center;

    }
</style>